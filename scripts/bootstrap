#!/usr/bin/env bash

sudo apt-get install git --assume-yes
git clone https://github.com/taylor-peterson/etc ~/etc

curl -L https://bootstrap.saltstack.com | sudo sh

sudo mkdir -p /etc/salt
sudo rm /etc/salt/minion
cat << EOF | sudo tee /etc/salt/minion
# Autogenerated salt minion config - do not modify.

# Run the minion in masterless mode.
file_client: local

# Where to look for salt state files.
file_roots:
  base:
    - ${HOME}/etc

# What user to run salt as (sets file permissions)
user: ${USER}
EOF

sudo salt-call --local state.apply
